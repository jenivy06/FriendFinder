<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>
   <div class = "container">
    <div class="section" id="landing">
        <h5 id="mainText" class="center"></h5>
        <h1 style="color: black;"  class="center">
            <img src="assets/images/logo.png">
            BUDDY SURVEY<b> 
            <br>
            
        </h1>
        <h5 id="mainText" class="center">Welcome to the Back to the Future buddy survey. Answer the questions below. They're ranked 1 to 5; answer 1 if you strongly disagree and 5 if you agree completely. Your answers will set you up with your ideal time-travel friend!</h5>
        <br>
        <br>
        <div class="row">
            <form class="col s12">
              <div class="row">
                <div class="input-field col s12">
                    <h6>Name (Required)</h6>
                    
                    <input type="text" class="validate" placeholder="Your Name Here" id="userName">
                </div>
            <div>
                  <h6>Question 1: While time traveling, you don't mind using your knowledge of the past to make a little money. </h6>
                  <select class="browser-default" id="question1">
                    <option value="" disabled selected>Choose your option</option>
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                    <option value="3">Option 4</option>
                    <option value="3">Option 5</option>
                  </select>
              </div>
              <div>
                <h6>Question 2: If you were to go back in time, you'd be curious to see what your parents and/or grandparents look like. </h6>
                <select class="browser-default" id="question2">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 3: While going to the past, your main priority would be to prevent a major tragedy.</h6>
                <select class="browser-default" id="question3">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 4: You're basic rule of thumb while time-traveling: don't touch anything.</h6>
                <select class="browser-default" id="question4">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 5: You're mostly into time-traveling for the science of it. You don't care about changing history.</h6>
                <select class="browser-default" id="question5">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 6: You'd be open to falling in love with someone from a different time period.</h6>
                <select class="browser-default" id="question6">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 7: You'd prefer to go to the future more than the past.</h6>
                <select class="browser-default" id="question7">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 8: You'd prefer to go to the past more than the future.</h6>
                <select class="browser-default" id="question8">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 9: You'd find it enjoyable to introduce new technologies to people in the past.</h6>
                <select class="browser-default" id="question9">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
            <div>
                <h6>Question 10: You'd be scared to share knowledge of the future with people in the past. </h6>
                <select class="browser-default" id="question10">
                  <option value="" disabled selected>Choose your option</option>
                  <option value="1">Option 1</option>
                  <option value="2">Option 2</option>
                  <option value="3">Option 3</option>
                  <option value="3">Option 4</option>
                  <option value="3">Option 5</option>
                </select>
            </div>
          </div>
          <div>
            <button class="btn waves-effect waves-light" type="submit" name="action" id="submitButton">Submit Responses
               
            </button>
        </div>
</div> 
   </div>
   <div id="modal1" class="modal">
    <div class="modal-content">
        <h4>Closest Friend Match</h4>
        <div class="divider"></div>
        <h5 id="userMatch"></h5>
        <img id="userMatchImage" class="materialboxed" width="650" src="">
    </div>
    <div class="modal-footer">
        <a href="/survey" class="modal-action modal-close waves-effect waves-green btn-flat">Fill Again!</a>
    </div>
</div>

<script type="text/javascript">
    $(document).ready(function() {
        $('select').material_select();

        $('.modal').modal({
            dismissible: false, // Modal can be dismissed by clicking outside of the modal
            opacity: .5, // Opacity of modal background
            inDuration: 300, // Transition in duration
            outDuration: 200, // Transition out duration
            startingTop: '4%', // Starting top style attribute
            endingTop: '10%' // Ending top style attribute
        });
    });

    // Activate submit button
    $('#submitButton').on('click', function(event) {
        event.preventDefault();

        // Gather user inputs
        var userInput = {
            name: $('#userName').val().trim(),
            scores:[
                $('#question1').val().trim(),
                $('#question2').val().trim(),
                $('#question3').val().trim(),
                $('#question4').val().trim(),
                $('#question5').val().trim(),
                $('#question6').val().trim(),
                $('#question7').val().trim(),
                $('#question8').val().trim(),
                $('#question9').val().trim(),
                $('#question10').val().trim()
            ]
        };

        // console.log('userInput = ' + JSON.stringify(userInput));

        // Add user inputs to friends list
        $.post('/api/friends', userInput)
          .done(function(data) {
              // console.log('response = ' + JSON.stringify(data));

              // Set the name and image values of friend match
              $('#userMatch').html(data.matchName);
            $("#userMatchImage").attr("src", data.matchImage);

            // Pop open the modal dialog
              $('#modal1').modal('open');
          });
    });
</script>
</body>

</html>
